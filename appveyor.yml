platform:
    - x86

environment:
    global:
        CYG_ROOT: C:/cygwin
        CYG_CACHE: C:/cygwin/var/cache/setup
        CYG_MIRROR: http://mirrors.kernel.org/sourceware/cygwin/
    matrix:
        - CYG_ARCH: x86

install:
    - 'appveyor DownloadFile http://cygwin.com/setup-%CYG_ARCH%.exe -FileName setup.exe'
    - 'setup.exe -qnNdO -R "%CYG_ROOT%" -s "%CYG_MIRROR%" -l "%CYG_CACHE%" -P make -P gcc-core >NUL'

build_script:
    - '%CYG_ROOT%/bin/bash -lc "ls $APPVEYOR_BUILD_FOLDER'
    - '%CYG_ROOT%/bin/bash -lc "cd $APPVEYOR_BUILD_FOLDER && cd src && ./mk.sh"'


artifacts:
  - path: 'src\vpcs.exe'
